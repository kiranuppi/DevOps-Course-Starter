language: python
services:
- docker
jobs:
  include:
  - stage: build and test
    script:
    - docker build --target test  --tag todo-app:test .
    - docker run todo-app:test tests_e2e
    - docker run --env-file ./.env.test todo-app:test tests
env:
  global:
  - secure: WgN2Xp+DOTZX+H+37l0o4NCP/tTXHg7nXVEuvXLPGuMZC4H2lg3uzsVUYEDBhdW90cnOrzpCpIzrc8Vuzsk0NsbXFGrUnGzJG+lCsigW65LQHINtK1QauRJADIj/Pu3FuwhV/1i73AhwVajY/7VUJ+VpMGvxfsHIKsoAtNTa5UtlKotvERWVGRTHat5xjG8laBgjLpA8QznMj+iGi8Hn3h2pbcFvo3gwpCJK1rquHe2/8Rf2xJ1ZlFCuBYTLtNR1OFcDLhq92hDgoXJtwSbG0BcQ+nqce8IUmzs34bxLv3ZHUGi1DSvvSwquc9xMnznTuGFYgGOSngWa4E9Y6fgGoaLDeDVtq2HcJKFCYpR2QDi2O9DgNwVgFCoVQQTRR5+kiwlG03xc3IPTra0bzfGICOa4ItPAQwxFWRB7ffYNv8suss6e6Nsu5nIWVvFC4LvFhvT8Zk+yEhBrMLcZuZ4ixhzuUnZ6/PhOaY6/XPqDyWJIpQ1rNJImTCB/fbCNGbc1jPZEp3pDDE0a7EG3nfr/1A5rXn8ydmG9ZwNnthJ3rpmPFo7fS+YJ/uSYWK3J5MYLfUqY63kQuX+PjixPNgmhdt/1H4xJnFKLU4c+w+MV3k3rvpiqhkJf0s5pwbAHWwjlEjfFMmFLZ1OT7mLyO5IusN+b2VYQvo5AtTWuLZWgrQA=
  - secure: KdwmPIP+SNU7SHzM4dz4zXyrf7uxmLsUYylJvszb33gpQLIgKKtRh97jlZdM8ZMLqNgPv34KZVDNvjtkuKuIBQJPQtkhFCiCD/LPRLwAcBKigTonUBH0btn0UZirJr2q8M3TURAggjMgfTaZeSa0Lxy61wG2MjHvX0DmpxSu6OK9N7nzcEOLiGivHZA7KJ3HIHYZ3NLUon9gijHIwU+/kiIZrDvwr719nzfbaJiUc+nQl09P82nrYVhbLZE/0Pht/6njWlVmnBl3xydqFOSGBre/33uAYZLudoh5n+Lf6/ITYRnrtawoNQMELHhX988iBRuvJkxOu3ekfilkhh0TD6sskfVNCAopzEj+B/CtmShFi4DexiKGiyJ1qpU5qRLA6BvLOXXwld/cMQRYwE2/FQEtNtGp2KG7z15VhGSfIlpjTa7y3MIu3W5NwsVhwOdy8huCzWiFJobC/YL9sNNqNdKvz7LpX4GhD3yuaz8GberDSDAVCimDWorg7wd8y45ZEB2B3CXxF5E0X6aZgnO/fzaX1BF9EmAsLjsZrmifycLEdjFj7p4xOtqRyHjd3xCCI35G7ThPUoXxvUBNSyBGXnvse6GvsRcD3G/tdd4thBU6oRjB0XY4e0JRS+2nJ3ejTSvTAwte8zhCwt9ADdzC35MqkDjfzM1BAQS/Nnbk8dU=
  - secure: qjCISsXZfOrq7yzEynIosC1D1QtoZn2CNDGpe/wQhl7EICsrbhkR5Sqr8mW2J6juQ6Az6KBTckPvlN4N2S4S72ecPURJpZpO0smNfNiHpNe6+a/Bs785SJsTQDnJ4hJLqyC26kX9qPv9iE9IeBAcuxdNb7NO/5PnwzTwlydKSZBIG7+hlZu9td5PNdYfAdY9pq8hoxuNFqodUw1fCc9FnFgCvZYCNZV0vKAeqUavfF5+nL5Eg7j51FPpnMqEwYJ6v1z9I+epWlRaKimtVN4CFLNTOZSRvVC6Xy5Mj4PxafYoo/XGx2hOBiWBNfYm+mFJWMOD0VxY84q66ZqW5k6HEfN8fhknydJA0VNZnzdbhI8PcFpXcjz9plK5/C/ds1slxHQevfiATLp/+V0mGNA9+jI8oltBZDlsdRvgtUApNDjbbUgr682MOH7JnnJhnbiQM/0uAnAWkjLoFkMOp7Cka4tu13myxZl5eTGuHxWkLPfAE7qrk8fRm1kemtr1EMZb8Bt/ex09tw5m37IQK3iFOa34BbyCVKpF+q2A5oDoBda+XgOHpNLgq5JzlcwkFYYQLUAQmGS8I+bYThXV6rl9vr5jSujDg1q3ygvzaLQW/IuQ8WwxGcXNwEKEatZ4MBZhnwqIYohNRlPkF42QVqPzraVh4T1TY1C9dkurr6fslPY=
  - secure: VDTAD/GPnrtyTcV7A3PaJL3hBrP+EjyxnNtyYXHKki7kCELiWhYVuVDNv45BcE8IGLCmhOM6m+Jlg7/V36hWHGgHNHiG9upRvukGdkL9CsB5SyuGR7f7JDV0B2iat/le6gRl7sB7LqBio7G8ya9Dydn8FqKnI5y71mLyOJNa4Or2Uwc83YkEeKz31T/fa0A6RxlJdN2eMBW1V1UZNODlrnb1u4nknhLOqnYF0JD2ST54RKkjRzeoDnSa2Bl905M+QbPyKgx8HjNe7WItTEOhDP0JLMnRxMQuGAOkU/KsX/i0lbRWp7Cr3M5CJyF2vrLYAi1t8f94I3PPrTxJJ+eA4GJXuGvcaPgbSkN/u9PEHquAbOiL1e7B4Ggr6XLdbQTlxP2JLue6/7ueVcn+jMLYi/lbr7kVnNL/ugay4ii+OHayij76j96WGq4AFzE29e6CG0xH+TZUVG8+sZeQLPFCG4Z9obPaEq/PQTJtiD1Dg+eeeNBvSuw1ZTtRHICFnWWzUKdOPN68km/WKxob9wCcDPOU5//ZHEdg/4ftyjzyM9wQnVAluC/OSUpGzdpUV+btgH9JwI2YYdVDSS2hX70Hohq1JoIeO2OQKK2INzsBZbKGJJXOBCrnbT8XYR0XrmHLVwp70CNbBKeYT6r3zYwNYCCQzhRpcaZyRO8OkKBGkz0=
